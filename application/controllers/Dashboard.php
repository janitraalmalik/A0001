<?php defined('BASEPATH') OR exit('No direct script access allowed');class Dashboard extends MX_Controller {		public function __construct(){		parent::__construct();	}		public function index(){	                $roleSession = $this->session->userdata('roleSession');                if(!isset($roleSession['roleName']) || $roleSession['roleName'] == ''){            redirect(site_url('/dashboard/roles'));        }         		$this->page->template('dashboard_tpl');		$this->page->view();	}        public function roles(){                $roleSession = $this->session->userdata('roleSession');                     if(!empty($roleSession['roleName']) || $roleSession['roleName'] != ''){            redirect(site_url('/dashboard/'));        }                $userSession = $this->session->userdata('userSession');                    $getRole = $this->db->join('jns_usaha b', 'a.jns_usaha_id = b.id')                                    ->where('user_id', $userSession['UserId'])                                    ->get('users_jns_usaha a');                $this->form_validation->set_rules('roleJenisUsaha', 'Jenis Usaha', 'required');        		if($this->form_validation->run()){                        $getRoles = $this->db->join('jns_usaha b', 'a.jns_usaha_id = b.id')                                    ->where('a.jns_usaha_id', post('roleJenisUsaha'))                                    ->where('user_id', $userSession['UserId'])                                    ->get('users_jns_usaha a');                                                if($getRoles->num_rows() == 1){                                foreach($getRoles->result() as $row){                    $roleUser = array(                                            'roleId' => $row->jns_usaha_id,                                            'roleCd' => $row->jns_usaha_kd,                                            'roleName' => $row->nama                                        );                                 }                                $this->session->set_userdata('roleSession', $roleUser);                                redirect(site_url('/dashboard/'));                            }          		          }                $roleUser = '';                                                            foreach($getRole->result() as $row){            $roleUser[] = array(                                    'roleId' => $row->jns_usaha_id,                                    'roleCd' => $row->jns_usaha_kd,                                    'roleName' => $row->nama                                );                         }                $this->page->template('role_tpl');		$this->page->view('role_tpl',array(			'moduleTitle'      => 'Jenis Usaha',			'moduleSubTitle'   => 'Jenis Usaha',			'contentData'	   => $roleUser));                			}		}/* End of file dasbor.php *//* Location: ./application/controllers/dasbor.php */